<Schema name="authority_health">
<Cube name="HRSA">
    <Annotations>
        <Annotation name="source_name">Health Resources and Services Administration</Annotation>
        <Annotation name="source_link">https://datawarehouse.hrsa.gov/topics/ahrf.aspx</Annotation>
        <Annotation name="dataset_name">HRSA</Annotation>
        <Annotation name="topic">Health</Annotation>
    </Annotations>

    <Table name="hrsa" schema="hrsa"/>

    <Dimension name="Year">
        <Annotations>
            <Annotation name="dim_type">TIME</Annotation>
        </Annotations>
         <Hierarchy hasAll="true">
            <Level name="Year" column="year" type="Numeric" levelType="TimeYears" uniqueMembers="true" />
        </Hierarchy>
    </Dimension>

    <Dimension foreignKey="county_fips" name="County">
        <Annotations>
            <Annotation name="dim_type">County</Annotation>
        </Annotations>
         <Hierarchy primaryKey="geoid" name="County" hasAll="true">
            <Table name="counties" schema="shapes2017" />  
            <Level name="County" column="geoid" nameColumn="name" uniqueMembers="false" />  
        </Hierarchy> 
    </Dimension>

    <Measure name="Dentists w/NPI" column="npi_total" aggregator="sum" />
    <Measure name="Dentists, Male w/NPI" column="npi_gender_male" aggregator="sum" />
    <Measure name="Dentists,Female w/NPI" column="npi_gender_female" aggregator="sum" />
    <Measure name="Dentists, Total Priv Practice" column="priv_practice_total" aggregator="sum" />
    <Measure name="Dentists, Total, Priv Pract, FT" column="priv_practice_ft" aggregator="sum" />
    <Measure name="Dentists, Total, Priv Pract, PT" column="priv_practice_pt" aggregator="sum" />
    <Measure name="Dent, Total Male, Priv Pract" column="priv_practice_gender_male" aggregator="sum" />
    <Measure name="Dent, Total Female, Priv Pract" column="priv_practice_gender_female" aggregator="sum" />
    <Measure name="Dent, Gender Unknown,Priv Pract" column="priv_practice_gender_unknown" aggregator="sum" />
    <Measure name="Dent, Priv Pract,Tot GPs and Ped" column="priv_practice_gps_and_ped" aggregator="sum" />
    <Measure name="Dent, Priv Pract,Tot Other Spec" column="priv_practice_other_specialties" aggregator="sum" />
    <Measure name="Dentists, Seeking Employment" column="status_seeking_employment" aggregator="sum" />
    <Measure name="Dentists, Other Occupation" column="status_other_occupation" aggregator="sum" />
    <Measure name="Dentists, No Longer in Practice" column="status_inactive" aggregator="sum" />
    <Measure name="Dentists, Occup Type Unknown" column="status_unknown" aggregator="sum" />
    <Measure name="Dentists, Total Prof Active" column="status_active" aggregator="sum" />
    <Measure name="Dentists, State or Local Govt" column="cat_government" aggregator="sum" />
    <Measure name="Dent,Staff, Fac and Staf,Hlth Org" column="cat_health_org_staff" aggregator="sum" />
    <Measure name="Dentists, Grad Student/Resident" column="cat_grad_student" aggregator="sum" />
    <Measure name="Dent,Armed Forces and Oth Fed Srv" column="cat_fed_service" aggregator="sum" />
    <Measure name="Dentists, Dental School Faculty" column="cat_dental_school_faculty" aggregator="sum" />
    <Measure name="Dentists,PT Faculty/PT Practice" column="cat_pt_faculty_or_practice" aggregator="sum" />
    <Measure name="# Active Dentists less than 35" column="age_35_or_less" aggregator="sum" />
    <Measure name="# Active Dentists 35" column="age_35_44" aggregator="sum" />
    <Measure name="# Active Dentists 45" column="age_45_54" aggregator="sum" />
    <Measure name="# Active Dentists 55" column="age_55_64" aggregator="sum" />
    <Measure name="# Active Dentists 65 or more" column="age_65_or_more" aggregator="sum" />
    <Measure name="# Active Dentists Age Unknown" column="age_unknown" aggregator="sum" />
</Cube>
<Cube name="FBI UCR">
    <Annotations> 
        <Annotation name="source_name">FBI: Uniform Crime Reporting</Annotation>   
        <Annotation name="source_link">https://ucr.fbi.gov/</Annotation>   
        <Annotation name="dataset_name">FBI UCR</Annotation>   
        <Annotation name="topic">Crime</Annotation>   
    </Annotations>

    <Table name="fbi_crime" schema="fbi_crime"/>
     
    <Dimension name="Year">
        <Annotations>
            <Annotation name="dim_type">TIME</Annotation>
        </Annotations>
         <Hierarchy hasAll="true">  
            <Level name="Year" column="year" type="Numeric" levelType="TimeYears" uniqueMembers="true" />  
        </Hierarchy> 
    </Dimension>   
    
    <Dimension foreignKey="geoid" name="City">
        <Annotations>
            <Annotation name="dim_type">City</Annotation>
        </Annotations>
         <Hierarchy primaryKey="geoid" name="City" hasAll="true">
            <Table name="places" schema="shapes2017" />  
            <Level name="City" column="geoid" nameColumn="name" uniqueMembers="false" />  
        </Hierarchy> 
    </Dimension>
    
    <Measure name="Population" column="population" aggregator="sum" />
    <Measure name="Total Violent Crimes" column="violent_crime_total" aggregator="sum" />
    <Measure name="Murder" column="murder" aggregator="sum" />
    <Measure name="Rape" column="rape" aggregator="sum" />
    <Measure name="Robbery" column="robbery" aggregator="sum" />
    <Measure name="Aggravated Assault" column="aggravated_assault" aggregator="sum" />

    <!-- TODO: Can add property crime data if AH is interested -->
</Cube>
<Cube name="NAEP Reading Assessment">
    <Annotations>
        <Annotation name="source_name">NAEP Reading Assessment</Annotation>
        <Annotation name="source_link">https://www.nationsreportcard.gov/reading_2017/#?grade=4</Annotation>
        <Annotation name="dataset_name">NAEP Reading Assessment</Annotation>
        <Annotation name="topic">Education</Annotation>
    </Annotations>

    <Table name="naep" schema="naep"/>
     
    <Dimension name="Year">
        <Annotations>
            <Annotation name="dim_type">TIME</Annotation>
        </Annotations>
         <Hierarchy hasAll="true">
            <Level name="Year" column="year" type="Numeric" levelType="TimeYears" uniqueMembers="true" />
        </Hierarchy>
    </Dimension>

    <Dimension name="Grade">
        <Annotations>
            <Annotation name="dim_type">Grade</Annotation>
        </Annotations>
         <Hierarchy hasAll="true">
            <Level name="Grade" column="grade" type="String" uniqueMembers="true" />
        </Hierarchy>
    </Dimension>
    
    <Measure name="Score" column="score" aggregator="sum" />
    <Measure name="National Average" column="national_average" aggregator="sum" />
    <Measure name="Michigan Average" column="michigan_average" aggregator="sum" />
    <Measure name="Race - Black" column="race_black" aggregator="sum" />
    <Measure name="Race - Hispanic" column="race_hispanic" aggregator="sum" />
    <Measure name="Gender - Male" column="gender_male" aggregator="sum" />
    <Measure name="Gender - Female" column="gender_female" aggregator="sum" />
    <Measure name="NSLP Eligible" column="nslp_eligible" aggregator="sum" />
    <Measure name="NSLP Ineligible" column="nslp_ineligible" aggregator="sum" />
    <Measure name="Parent edu - No high school" column="edu_no_high_school" aggregator="sum" />
    <Measure name="Parent edu - High school" column="edu_high_school" aggregator="sum" />
    <Measure name="Parent edu - Some college" column="edu_some_college" aggregator="sum" />
    <Measure name="Parent edu - College" column="edu_college" aggregator="sum" />
    <Measure name="Parent edu - Unknown" column="edu_unknown" aggregator="sum" />
    <Measure name="Disability - Yes" column="disabilities" aggregator="sum" />
    <Measure name="Disability - No" column="no_disabilities" aggregator="sum" />
    <Measure name="ELL - Yes" column="ell" aggregator="sum" />
    <Measure name="ELL - No" column="not_ell" aggregator="sum" />
    <Measure name="Percent Proficient - Detroit" column="proficient_percent" aggregator="sum" />
    <Measure name="Percent Proficient - National" column="national_proficient_percent" aggregator="sum" />
    <Measure name="Percent Proficient - Michigan" column="michigan_proficient_percent" aggregator="sum" />
</Cube>
<Cube name="MiBRFS">
    <Annotations>
        <Annotation name="source_name">Michigan Behavioral Risk Factor Surveillance System</Annotation>
        <Annotation name="source_link">https://www.michigan.gov/mdhhs/0,5885,7-339-71550_5104_5279_39424---,00.html</Annotation>
        <Annotation name="dataset_name">Activity Limitations</Annotation>
        <Annotation name="topic">Health</Annotation>
        <Annotation name="subtopic">Risk Factors</Annotation>
    </Annotations>

    <Table name="mibrfs" schema="mibrfs"/>

    <Dimension name="Start Year">
        <Annotations>
          <Annotation name="dim_type">TIME</Annotation>
        </Annotations>
        <Hierarchy hasAll="true">
          <Level name="Start Year" column="start_year" levelType="TimeYears" type="Numeric" uniqueMembers="true" />
        </Hierarchy>
    </Dimension>

    <Dimension name="End Year">
        <Annotations>
          <Annotation name="dim_type">TIME</Annotation>
        </Annotations>
        <Hierarchy hasAll="true">
          <Level name="End Year" column="end_year" levelType="TimeYears" type="Numeric" uniqueMembers="true" />
        </Hierarchy>
    </Dimension>

    <Dimension foreignKey="region_id" name="Geography">
        <Annotations>
          <Annotation name="dim_type">GEOGRAPHY</Annotation>
        </Annotations>
        <Hierarchy primaryKey="zip_region_id" hasAll="true">
          <Table name="zip_regions" schema="dims"/>
          <Level column="zip_region_id" name="Zip Region" nameColumn="zip_region_name" uniqueMembers="true"/>
        </Hierarchy>
    </Dimension>

    <Dimension name="Measure">
        <Annotations>
          <Annotation name="dim_type">Measure</Annotation>
        </Annotations>
        <Hierarchy hasAll="true">
          <Level name="Category" column="measure" uniqueMembers="true" />
        </Hierarchy>
    </Dimension>
     
    <Measure name="Sample Frequency" column="sample_frequency" aggregator="sum" />
    <Measure name="Weighted Frequency" column="weighted_frequency" aggregator="sum" />
    <Measure name="Weighted Percent" column="weighted_percent" aggregator="avg" />
</Cube><Cube name="USDA">
    <Annotations>
        <Annotation name="source_name">United State Department of Agriculture</Annotation>
        <Annotation name="source_link">https://www.ers.usda.gov/</Annotation>
        <Annotation name="dataset_name">USDA</Annotation>
        <Annotation name="topic">Environmental</Annotation>
    </Annotations>

    <Table name="usda" schema="usda"/>
     
    <Dimension foreignKey="fips" name="County">
        <Annotations>
            <Annotation name="dim_type">County</Annotation>
        </Annotations>
         <Hierarchy primaryKey="geoid" name="County" hasAll="true">
            <Table name="counties" schema="shapes2017" />  
            <Level name="County" column="geoid" nameColumn="name" uniqueMembers="false" />  
        </Hierarchy> 
    </Dimension>

    <Measure name="Total Farmer's Markets in 2009" column="number_of_farmers_markets_2009" aggregator="sum" />
    <Measure name="Total Farmer's Markets in 2016" column="number_of_farmers_markets_2016" aggregator="sum" />
</Cube>
<Cube name="500 Cities">
    <Annotations> 
        <Annotation name="source_name">500 Cities: Local Data for Better Health</Annotation>   
        <Annotation name="source_link">https://www.cdc.gov/500cities/</Annotation>   
        <Annotation name="dataset_name">500 Cities</Annotation>   
        <Annotation name="topic">Health</Annotation>   
        <Annotation name="subtopic">Chronic disease risk factors, health outcomes, and clinical preventive service use</Annotation>   
    </Annotations>

    <Table name="cities_500" schema="cities_500"/>
     
    <Dimension name="Year">
        <Annotations>
            <Annotation name="dim_type">TIME</Annotation>
        </Annotations>
         <Hierarchy primaryKey="" foreignKey="" name="" hasAll="true">  
            <Level name="Year" column="year" type="Numeric" levelType="TimeYears" nameColumn="" uniqueMembers="true" />  
        </Hierarchy> 
    </Dimension>   
    <Dimension foreignKey="city_fips" name="City">
        <Annotations>
            <Annotation name="dim_type">City</Annotation>
        </Annotations>
         <Hierarchy primaryKey="geoid" foreignKey="" name="City" hasAll="true">
            <Table name="places" schema="shapes2017" />  
            <Level name="City" column="geoid" type="" levelType="" nameColumn="name" uniqueMembers="false" />  
        </Hierarchy> 
    </Dimension>   
    <Dimension foreignKey="tract_fips" name="Tract">
        <Annotations>
            <Annotation name="dim_type">Tract</Annotation>
        </Annotations>
         <Hierarchy primaryKey="geoid" foreignKey="" name="Tract" hasAll="true">
            <Table name="tracts" schema="shapes2017" />  
            <Level name="Tract" column="geoid" type="" levelType="" nameColumn="name" uniqueMembers="false" />  
        </Hierarchy> 
    </Dimension>   
    <Dimension name="Indicator">
        <Annotations>
            <Annotation name="dim_type">Measure</Annotation>
        </Annotations>
         <Hierarchy hasAll="true">  
            <Level name="Measure" column="short_question_text" type="String" uniqueMembers="true" />  
        </Hierarchy> 
    </Dimension>  
     
    <Measure name="Data Value" column="data_value" aggregator="sum" />   
    <Measure name="Low Confidence Limit" column="low_confidence_limit" aggregator="sum" />   
    <Measure name="High Confidence Limit" column="high_confidence_limit" aggregator="sum" />   
    <Measure name="Population Count" column="population_count" aggregator="sum" />  
</Cube>
<Cube name="Feeding America">
    <Annotations>
        <Annotation name="source_name">Feeding America: Map the Meal Gap</Annotation>
        <Annotation name="source_link">http://www.feedingamerica.org/</Annotation>
        <Annotation name="dataset_name"></Annotation>
        <Annotation name="topic">Environmental</Annotation>
    </Annotations>

    <Table name="feeding_america" schema="feeding_america"/>

    <Dimension name="Year">
        <Annotations>
            <Annotation name="dim_type">TIME</Annotation>
        </Annotations>
         <Hierarchy hasAll="true">
            <Level name="Year" column="year" type="Numeric" levelType="TimeYears" uniqueMembers="true" />
        </Hierarchy>
    </Dimension>

    <Dimension foreignKey="county" name="County">
        <Annotations>
            <Annotation name="dim_type">County</Annotation>
        </Annotations>
         <Hierarchy primaryKey="geoid" name="County" hasAll="true">
            <Table name="counties" schema="shapes2017" />  
            <Level name="County" column="geoid" nameColumn="name" uniqueMembers="false" />  
        </Hierarchy> 
    </Dimension>

    <Measure name="Food Insecurity Rate" column="food_insecurity_rate" aggregator="avg" />
    <Measure name="Total Population Under 18" column="population_under_18" aggregator="sum" />
    <Measure name="Child Food Insecurity Rate" column="child_food_insecurity_rate" aggregator="avg" />
    <Measure name="Estimated Total Food Insecure Children" column="estimated_food_insecure_children" aggregator="sum" />
    <Measure name="Percent Eligible for Federal Nuttrition Assistance" column="federal_nutrition_assistance_eligible_pct" aggregator="avg" />
    <Measure name="Percent Ineligible for Federal Nuttrition Assistance" column="federal_nutrition_assistance_ineligible_pct" aggregator="avg" />
</Cube>
<Cube name="VCU - Life Expectancy at Birth">
    <Annotations>
      <Annotation name="source_name">Virginia Commonwealth University Center on Society and Health</Annotation>
      <Annotation name="source_description">According to its site: The VCU Center on Society and Health (formerly the VCU Center on Human Needs) is an academic research center that studies the health implications of social factorsâ€”such as education, income, neighborhood and community environmental conditions, and public policy.</Annotation>
      <Annotation name="dataset_name">Detroit Life Expectancy</Annotation>
      <Annotation name="source_link">https://societyhealth.vcu.edu/</Annotation>
      <Annotation name="dataset_link">https://storage.googleapis.com/ah-storage.datawheel.us/VCU%20Life%20Expectancy/LE-Map-Detroit-Methods.pdf</Annotation>
      <Annotation name="subtopic">Access and Quality</Annotation>
      <Annotation name="topic">Health</Annotation>
    </Annotations>
    <Table name="life_expectancy_at_birth" schema="vcu"/>
    <Dimension name="Start Year">
      <Annotations>
        <Annotation name="dim_type">TIME</Annotation>
      </Annotations>
      <Hierarchy hasAll="true">
        <Level column="start_year" levelType="TimeYears" name="Start Year" type="Numeric" uniqueMembers="true"/>
      </Hierarchy>
    </Dimension>
    <Dimension name="End Year">
      <Annotations>
        <Annotation name="dim_type">TIME</Annotation>
      </Annotations>
      <Hierarchy hasAll="true">
        <Level column="end_year" levelType="TimeYears" name="End Year" type="Numeric" uniqueMembers="true"/>
      </Hierarchy>
    </Dimension>
    <Dimension name="Geography">
      <Annotations>
        <Annotation name="dim_type">Geography</Annotation>
      </Annotations>
      <!--
      Ordinarily, would use a table in the geography hierarchy, but since this data
      only contains a small subset of Zips, we'll reference only the zips in this table
      so as to limit the cut options.
      -->
      <Hierarchy hasAll="true">
        <Level column="zip" name="Zip" type="String" uniqueMembers="true">
          <NameExpression>
            <SQL>
              RIGHT(zip, 5)
            </SQL>
          </NameExpression>
        </Level>
      </Hierarchy>
    </Dimension>
    <Measure name="Life Expectancy at Birth" column="le_years" aggregator="avg" visible="true">
      <Annotations>
        <Annotation name="details"></Annotation>
        <Annotation name="units_of_measurement">Years</Annotation>
      </Annotations>
    </Measure>
  </Cube>
<Cube name="BLS - Unemployment">
    <Annotations>
        <Annotation name="source_name">Bureau of Labor Statistics: Unemployment</Annotation>
        <Annotation name="source_link">https://www.bls.gov/lau/</Annotation>
        <Annotation name="dataset_name">BLS: Unemployment</Annotation>
        <Annotation name="topic">Unemployment</Annotation>
    </Annotations>

    <Table name="bls" schema="bls"/>
     
    <Dimension name="Year">
        <Annotations>
            <Annotation name="dim_type">TIME</Annotation>
        </Annotations>
         <Hierarchy hasAll="true">
            <Level name="Year" column="year" type="Numeric" levelType="TimeYears" uniqueMembers="true" />
        </Hierarchy>
    </Dimension>

    <Dimension foreignKey="geoid" name="County">
        <Annotations>
            <Annotation name="dim_type">County</Annotation>
        </Annotations>
         <Hierarchy primaryKey="geoid" name="County" hasAll="true">
            <Table name="counties" schema="shapes2017" />  
            <Level name="County" column="geoid" nameColumn="name" uniqueMembers="false" />  
        </Hierarchy> 
    </Dimension>

    <Measure name="Labor Force" column="labor_force" aggregator="sum" />
    <Measure name="Employed" column="employed" aggregator="sum" />
    <Measure name="Unemployed" column="unemployed" aggregator="sum" />
    <!-- TODO: Add another measure with an overall unemployment rate -->
    <Measure name="Unemployment Rate" column="unemployment_rate" aggregator="avg" />
</Cube>
<Cube name="DCI">
    <Annotations>
        <Annotation name="source_name">Distressed Communities Index</Annotation>
        <Annotation name="source_link">https://eig.org/dci/</Annotation>
        <Annotation name="dataset_name">DCI</Annotation>
        <Annotation name="topic">Socio-economic</Annotation>
    </Annotations>

    <Table name="dci" schema="dci"/>
     
    <!-- TODO: Uncomment once we have confirmation from AH that year is 2017 -->
    <!-- <Dimension name="Year">
        <Annotations>
            <Annotation name="dim_type">TIME</Annotation>
        </Annotations>
         <Hierarchy hasAll="true">
            <Level name="Year" column="year" type="Numeric" levelType="TimeYears" uniqueMembers="true" />
        </Hierarchy>
    </Dimension> -->

    <Dimension foreignKey="zipcode" name="Zip Code">
        <Annotations>
            <Annotation name="dim_type">Zip Code</Annotation>
        </Annotations>
         <Hierarchy primaryKey="name" name="Zip Code" hasAll="true">
            <Table name="zips" schema="shapes2017" />  
            <Level name="Zip Code" column="name" nameColumn="name" uniqueMembers="false" />  
        </Hierarchy> 
    </Dimension>

    <Measure name="Total Population" column="total_population" aggregator="sum" />
    <Measure name="High School Dropout Rate" column="high_school_dropout_rate" aggregator="avg" />
    <Measure name="Poverty Rate" column="poverty_rate" aggregator="avg" />
    <Measure name="Percent Adults not Working" column="percent_adults_not_working" aggregator="avg" />
    <Measure name="Housing Vacancy Rate" column="housing_vacancy_rate" aggregator="avg" />
    <Measure name="Median Income Ratio" column="median_income_ratio" aggregator="avg" />
    <Measure name="Percent Change in Employment" column="percent_change_in_employment" aggregator="avg" />
    <Measure name="Percent Change in Establishments" column="percent_change_in_establishments" aggregator="avg" />
    <Measure name="Distress Score" column="distress_score" aggregator="min" />
    <Measure name="Distress Quintile" column="distress_quintile" aggregator="min" />
    <Measure name="Distress County Ranking" column="distress_county_ranking" aggregator="min" />
    <Measure name="Distress State Ranking" column="distress_state_ranking" aggregator="min" />
</Cube>

</Schema>