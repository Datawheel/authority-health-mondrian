<Cube name="USDA - Stores">
    <Annotations>
        <Annotation name="source_name">United State Department of Agriculture</Annotation>
        <Annotation name="source_link">https://www.ers.usda.gov/</Annotation>
        <Annotation name="dataset_name">USDA</Annotation>
        <Annotation name="topic">Environmental</Annotation>
    </Annotations>

    <Table name="usda" schema="usda_stores"/>

    <Dimension name="Year">
        <Annotations>
            <Annotation name="dim_type">TIME</Annotation>
        </Annotations>
         <Hierarchy hasAll="true">  
            <Level name="Year" column="year" type="Numeric" levelType="TimeYears" uniqueMembers="true" />  
        </Hierarchy> 
    </Dimension>

    <Dimension foreignKey="fips" name="Geography">
        <Annotations>
            <Annotation name="dim_type">GEOGRAPHY</Annotation>
        </Annotations>
        <Hierarchy hasAll="true" name="County">
            <Table name="counties" schema="shapes2017"/>
            <Level name="County" column="geoid" nameColumn="name" uniqueMembers="true" hideMemberIf="IfBlankName" />
        </Hierarchy>
    </Dimension>

    <Dimension name="Store Type">
        <Annotations>
            <Annotation name="dim_type">STORE_TYPE</Annotation>
        </Annotations>
        <!-- Local, Stores, Restaurants -->
    </Dimension>

    <Measure name="Farmers' markets" column="fmrkt" aggregator="sum" />
    <Measure name="Farmers' markets/1000 pop" column="fmrktpth" aggregator="avg" />
    
    <Measure name="Grocery stores" column="groc" aggregator="sum" />
    <Measure name="Grocery stores/1000 pop" column="grocpth" aggregator="avg" />
    <Measure name="Supercenters and club stores" column="superc" aggregator="sum" />
    <Measure name="Supercenters and club stores/1000 pop" column="supercpth" aggregator="avg" />
    <Measure name="Convenience stores" column="convs" aggregator="sum" />
    <Measure name="Convenience stores/1000 pop" column="convspth" aggregator="avg" />
    <Measure name="Specialized food stores" column="specs" aggregator="sum" />
    <Measure name="Specialized food stores/1000 pop" column="specspth" aggregator="avg" />
    
    <!-- TODO: Do these add up to the total or have they already been accounted for? -->
    <Measure name="SNAP-authorized stores" column="snaps" aggregator="sum" />
    <Measure name="SNAP-authorized stores/1000 pop" column="snapspth" aggregator="avg" />
    <Measure name="WIC-authorized stores" column="wics" aggregator="sum" />
    <Measure name="WIC-authorized stores/1000 pop" column="wicspth" aggregator="avg" />

    <Measure name="Fast-food restaurants" column="ffr" aggregator="sum" />
    <Measure name="Fast-food restaurants/1000 pop" column="ffrpth" aggregator="avg" />
    <Measure name="Full-service restaurants" column="fsr" aggregator="sum" />
    <Measure name="Full-service restaurants/1000 pop" column="fsrpth" aggregator="avg" />
</Cube>
